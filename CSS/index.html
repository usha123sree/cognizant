<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Community Event Portal</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#events">Events</a></li>
            <li><a href="#contact">Contact</a></li>
            <li><a href="help.html" target="_blank">Help Document</a></li>
        </ul>
    </nav>

    <main>
        <section id="home">
            <h1 style="color: #e74c3c; text-decoration: underline;">Welcome to the Local Community Event Portal!</h1>
            <div id="welcomeBanner">
                <p>Welcome, logged-in user! Check out our <span class="special-offer">special offer</span> for new registrations!</p>
            </div>
            <p>This portal helps residents <span class="highlight">register for events</span>, check locations, and access basic services.</p>
        </section>

        <section id="events">
            <h2>Upcoming Events</h2>
            <div class="gallery-container">
                <h3>Past Community Events Gallery</h3>
                <div class="image-gallery">
                    <div class="gallery-item">
                        <img src="https://godreamcast.com/blog/wp-content/uploads/2024/12/Community-Clean-Up-Events.jpg" alt="Community Clean-Up Events" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Error';">
                        <p>Community Clean-Up Events</p>
                    </div>
                    <div class="gallery-item">
                        <img src="https://th.bing.com/th/id/OIP.NqLlw4IBR044lPr37_wbvAAAAA?w=224&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="Local Live Concert" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Error';">
                        <p>Local Live Concert</p>
                    </div>
                    <div class="gallery-item">
                        <img src="https://th.bing.com/th/id/OIP.iuMQ6XO4gtSlIJ9O4EL2JgHaE8?w=255&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="Art Exhibition" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Error';">
                        <p>Art Exhibition</p>
                    </div>
                    <div class="gallery-item">
                        <img src="https://th.bing.com/th/id/OIP.MiWmXTiyyXnzLnFmYsTiewHaD4?w=335&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="Festival Celebrating Community" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Error';">
                        <p>Festival Celebrating Community</p>
                    </div>
                    <div class="gallery-item">
                        <img src="https://th.bing.com/th/id/OIP.xK6RhnrZd-HvqK_H0R-PMQHaEo?w=268&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="Educational Webinars" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Error';">
                        <p>Educational Webinars</p>
                    </div>
                    <div class="gallery-item">
                        <img src="https://th.bing.com/th/id/OIP.ygsvG23k4DjO50BW2afmPgAAAA?w=263&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7" alt="Book Fair" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Error';">
                        <p>Book Fair</p>
                    </div>
                </div>
            </div>

            <h3>Event Registration</h3>
            <form id="eventRegistrationForm">
                <div>
                    <label for="name">Name:</label>
                    <input type="text" id="name" name="name" placeholder="Your full name" required autofocus>
                </div>
                <div>
                    <label for="email">Email:</label>
                    <input type="email" id="email" name="email" placeholder="your.email@example.com" required>
                </div>
                <div>
                    <label for="phone">Phone Number:</label>
                    <input type="text" id="phone" name="phone" placeholder="e.g., 123-456-7890">
                    <small id="phoneError"></small>
                </div>
                <div>
                    <label for="date">Event Date:</label>
                    <input type="date" id="date" name="date" required>
                </div>
                <div>
                    <label for="eventType">Event Type:</label>
                    <select id="eventType" name="eventType">
                        <option value="">Select an Event Type</option>
                        <option value="conference" data-fee="50">Conference</option>
                        <option value="workshop" data-fee="25">Workshop</option>
                        <option value="seminar" data-fee="10">Seminar</option>
                        <option value="free" data-fee="0">Free Event</option>
                    </select>
                    <p id="eventFee">Event Fee: $0</p>
                </div>
                <div>
                    <label for="message">Message:</label>
                    <textarea id="message" name="message" rows="5" placeholder="Any special requests or questions?" maxlength="500"></textarea>
                    <p class="char-count-text">Characters left: <span id="charCount">500</span></p>
                </div>
            </form>
        </section>

        <section id="video-invite">
            <h2>Event Promo Video</h2>
            <video id="promoVideo" controls>
                <source src="https://cdn.pixabay.com/video/2020/07/18/44926-441206479_large.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <p id="videoStatus"></p>
        </section>

        <section id="events-admin-table">
            <h2>Event Administration Table</h2>
            <table class="events-table">
                <thead>
                    <tr>
                        <th>Event Name</th>
                        <th>Date</th>
                        <th>Location</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Community Picnic</td>
                        <td>2025-06-15</td>
                        <td>Central Park</td>
                        <td>Confirmed</td>
                    </tr>
                    <tr>
                        <td>Annual Book Fair</td>
                        <td>2025-07-20</td>
                        <td>Community Hall</td>
                        <td>Confirmed</td>
                    </tr>
                    <tr>
                        <td>Summer Music Fest</td>
                        <td>2025-08-10</td>
                        <td>Town Square</td>
                        <td>Pending</td>
                    </tr>
                    <tr>
                        <td>Local Art Showcase</td>
                        <td>2025-09-05</td>
                        <td>Art Gallery</td>
                        <td>Confirmed</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section class="news-article">
            <h2>Community Bulletin</h2>
            <div class="news-content">
                <p>
                    Welcome to our Community Bulletin! This is where we share important updates, upcoming initiatives, and highlights from around our wonderful community. Stay informed about local events, public service announcements, and opportunities to get involved.
                </p>
                <p>
                    **Upcoming Town Hall Meeting:** Join us on June 10th at 7:00 PM in the Community Hall for our quarterly Town Hall meeting. We'll be discussing new park developments, recycling programs, and budget allocations. Your input is crucial for shaping our community's future.
                </p>
                <p>
                    **Volunteer Spotlight:** We want to extend a huge thank you to all our volunteers who helped make the recent "Green Spaces Clean-Up" event a tremendous success. Your dedication made a significant difference in beautifying our local parks. If you're interested in future volunteer opportunities, please visit our 'Contact Us' section.
                </p>
                <p>
                    **New Library Hours:** Effective July 1st, the Community Library will extend its evening hours until 8:00 PM on Tuesdays and Thursdays to better serve our working residents. Don't forget to check out our new arrivals and summer reading programs!
                </p>
                <p>
                    **Local Business Fair:** Mark your calendars for August 5th! The annual Local Business Fair will showcase diverse businesses from our area, offering unique products and services. It's a great chance to support local entrepreneurs and discover hidden gems.
                </p>
            </div>
        </section>

        <section id="preferences">
            <h2>User Preferences</h2>
            <label for="preferredEventType">Preferred Event Type:</label>
            <select id="preferredEventType">
                <option value="">Select your preferred event type</option>
                <option value="conference">Conference</option>
                <option value="workshop">Workshop</option>
                <option value="seminar">Seminar</option>
                <option value="free">Free Event</option>
            </select>
            <button id="clearPreferencesButton">Clear Preferences</button>
        </section>

        <section id="geolocation">
            <h2>Find Nearby Events</h2>
            <button id="findNearbyEventsButton">Find Nearby Events</button>
        </section>

        <section id="feedback">
            <h2>Give Us Your Feedback</h2>
            <div>
                <label for="feedbackMessage">Message:</label>
                <textarea id="feedbackMessage" name="feedbackMessage" rows="5" placeholder="Share your thoughts with us..." maxlength="500"></textarea>
                <p class="char-count-text">Characters left: <span id="feedbackCharCount">500</span></p>
            </div>
        </section>

        <section id="contact">
            <h2>Contact Us</h2>
            <p>If you have any questions, feel free to reach out via <a href="mailto:info@communityportal.com">email</a> or <a href="tel:+1234567890">phone</a>.</p>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Local Community Event Portal</p>
    </footer>

    <script>
        // JavaScript for dynamic functionalities

        // 1. Event Fee Calculation
        const eventTypeSelect = document.getElementById('eventType');
        const eventFeeDisplay = document.getElementById('eventFee');

        if (eventTypeSelect && eventFeeDisplay) {
            eventTypeSelect.addEventListener('change', function() {
                const selectedOption = this.options[this.selectedIndex];
                const fee = selectedOption.dataset.fee || '0';
                eventFeeDisplay.textContent = `Event Fee: $${fee}`;
            });
        } else {
            console.error("Elements for event fee calculation not found.");
        }


        // 2. Character Count for Message Textarea
        const messageTextarea = document.getElementById('message');
        const charCountSpan = document.getElementById('charCount');

        if (messageTextarea && charCountSpan) {
            messageTextarea.addEventListener('input', function() {
                const maxLength = this.maxLength;
                const currentLength = this.value.length;
                const charsLeft = maxLength - currentLength;
                charCountSpan.textContent = charsLeft;
            });
        } else {
            console.error("Elements for message character count not found.");
        }

        // 3. Character Count for Feedback Textarea
        const feedbackMessageTextarea = document.getElementById('feedbackMessage');
        const feedbackCharCountSpan = document.getElementById('feedbackCharCount');

        if (feedbackMessageTextarea && feedbackCharCountSpan) {
            feedbackMessageTextarea.addEventListener('input', function() {
                const maxLength = this.maxLength;
                const currentLength = this.value.length;
                const charsLeft = maxLength - currentLength;
                feedbackCharCountSpan.textContent = charsLeft;
            });
        } else {
            console.error("Elements for feedback character count not found.");
        }


        // 4. Video Playback Status
        const promoVideo = document.getElementById('promoVideo');
        const videoStatus = document.getElementById('videoStatus');

        if (promoVideo && videoStatus) {
            promoVideo.addEventListener('play', () => {
                videoStatus.textContent = 'Video is playing...';
            });

            promoVideo.addEventListener('pause', () => {
                videoStatus.textContent = 'Video is paused.';
            });

            promoVideo.addEventListener('ended', () => {
                videoStatus.textContent = 'Video has ended. Thank you for watching!';
            });

            promoVideo.addEventListener('error', () => {
                videoStatus.textContent = 'Error loading video.';
            });
        } else {
            console.error("Elements for video status not found.");
        }


        // 5. User Preferences (Local Storage)
        const preferredEventTypeSelect = document.getElementById('preferredEventType');
        const clearPreferencesButton = document.getElementById('clearPreferencesButton');

        // Load preference from local storage on page load
        if (preferredEventTypeSelect) {
            const savedPreference = localStorage.getItem('preferredEventType');
            if (savedPreference) {
                preferredEventTypeSelect.value = savedPreference;
            }

            // Save preference to local storage on change
            preferredEventTypeSelect.addEventListener('change', function() {
                localStorage.setItem('preferredEventType', this.value);
            });
        } else {
            console.error("Element for preferred event type select not found.");
        }


        // Clear preferences button
        if (clearPreferencesButton) {
            clearPreferencesButton.addEventListener('click', function() {
                localStorage.removeItem('preferredEventType');
                if (preferredEventTypeSelect) {
                    preferredEventTypeSelect.value = ""; // Reset select to default
                }
            });
        } else {
            console.error("Element for clear preferences button not found.");
        }


        // 6. Geolocation (Basic implementation - requires user permission)
        const findNearbyEventsButton = document.getElementById('findNearbyEventsButton');

        if (findNearbyEventsButton) {
            findNearbyEventsButton.addEventListener('click', function() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            const geoStatusDiv = document.createElement('div');
                            geoStatusDiv.textContent = `Found your location: Latitude ${lat}, Longitude ${lon}. Searching for nearby events...`;
                            geoStatusDiv.style.marginTop = '10px';
                            geoStatusDiv.style.padding = '10px';
                            geoStatusDiv.style.backgroundColor = '#d4edda';
                            geoStatusDiv.style.color = '#155724';
                            geoStatusDiv.style.border = '1px solid #c3e6cb';
                            geoStatusDiv.style.borderRadius = '5px';
                            geoStatusDiv.style.textAlign = 'center';
                            findNearbyEventsButton.parentNode.insertBefore(geoStatusDiv, findNearbyEventsButton.nextSibling);

                        },
                        (error) => {
                            let errorMessage = 'Error getting your location.';
                            switch(error.code) {
                                case error.PERMISSION_DENIED:
                                    errorMessage = "Location access denied. Please enable it in your browser settings.";
                                    break;
                                case error.POSITION_UNAVAILABLE:
                                    errorMessage = "Location information is unavailable.";
                                    break;
                                case error.TIMEOUT:
                                    errorMessage = "The request to get user location timed out.";
                                    break;
                                default:
                                    errorMessage = "An unknown error occurred.";
                                    break;
                            }
                            const geoErrorDiv = document.createElement('div');
                            geoErrorDiv.textContent = errorMessage;
                            geoErrorDiv.style.marginTop = '10px';
                            geoErrorDiv.style.padding = '10px';
                            geoErrorDiv.style.backgroundColor = '#f8d7da';
                            geoErrorDiv.style.color = '#721c24';
                            geoErrorDiv.style.border = '1px solid #f5c6cb';
                            geoErrorDiv.style.borderRadius = '5px';
                            geoErrorDiv.style.textAlign = 'center';
                            findNearbyEventsButton.parentNode.insertBefore(geoErrorDiv, findNearbyEventsButton.nextSibling);
                        }
                    );
                } else {
                    const geoNotSupportedDiv = document.createElement('div');
                    geoNotSupportedDiv.textContent = 'Geolocation is not supported by your browser.';
                    geoNotSupportedDiv.style.marginTop = '10px';
                    geoNotSupportedDiv.style.padding = '10px';
                    geoNotSupportedDiv.style.backgroundColor = '#fff3cd';
                    geoNotSupportedDiv.style.color = '#856404';
                    geoNotSupportedDiv.style.border = '1px solid #ffeeba';
                    geoNotSupportedDiv.style.borderRadius = '5px';
                    geoNotSupportedDiv.style.textAlign = 'center';
                    findNearbyEventsButton.parentNode.insertBefore(geoNotSupportedDiv, findNearbyEventsButton.nextSibling);
                }
            });
        } else {
            console.error("Elements for phone number validation not found.");
        }

        // 7. Phone Number Validation (simple regex)
        const phoneInput = document.getElementById('phone');
        const phoneError = document.getElementById('phoneError');

        if (phoneInput && phoneError) {
            phoneInput.addEventListener('input', function() {
                const phonePattern = /^\d{3}-\d{3}-\d{4}$/; // e.g., 123-456-7890
                if (this.value === "" || phonePattern.test(this.value)) {
                    phoneError.textContent = "";
                    this.style.outline = ""; // Clear outline
                } else {
                    phoneError.textContent = "Please enter a valid phone number (e.g., 123-456-7890)";
                    this.style.outline = "2px solid #e74c3c"; // Red outline for error
                }
            });
        } else {
            console.error("Elements for phone number validation not found.");
        }

    </script>
</body>
</html>
